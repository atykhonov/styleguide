---
page_title: Changes review
---

This page discuss the code/changes review process as both the person
who reqests a reviewer and a person who checks a review.

..  contents::


For person requesting a review
==============================


* Once a task/ticket is done, it should be submitted for review.
* **All** changes should be reviewed prior to be merged or released.
* Before requesting a review it is recommend to run a full test on all
  supported platforms (using buildbot.)
* For Trac: To mark a ticket as requiring review, set the state to 'needs_review'.
  (**don't use keywords**, we are using a strict ticket workflow so use
  the ticket action form). Add a link to the pull request.
* For GitHub: Create a **Pull request**.


Review request message
----------------------

When submitting a ticket for review, the review request should contain the
followings message (added to the ticket description)::

    {{ '{{{' }}
    #!rst
    Merge commit message.

    Problem description
    ===================

    Describe the problem that these changes wants to solve.
    This content should be created when a ticket is submitted and just link
    the ticket or copy paste the ticket description... or find a way for
    linking this review to a ticket.


    Why we got into this (5 whys)
    =============================

    Mainly used for bugs.
    Describe why we got this problem in the first place. What went wrong.
    Repeatedly ask the question “Why” (up to 5 times) to determine to
    cause of this problem.


    Changes description
    ===================

    Describe how the problem was fixed.
    What changes were done.
    What actions were performed.
    What was not done yet and link to the ticket for the still to do work.


    How to try and test the changes
    ===============================

    What code/repositories were affected. Where is the code.
    A list of automated tests related to this changes.
    How the changes can be tested and verified.
    A list of steps to follow for checking that everything is OK.
    {{ '}}}' }}

* Merge commit message is only required for changes related to a code
  that needs to be merged. All other changes can ignore it.

* When submitting a review for changes not planed in the current milestone,
  update the milestone to the curent one. Don't leave the old milestone.


Small Merge Requests
--------------------

* Ideally you will have many small merge requests, because the bigger they
  get, the more costly they are - now and in the future.

* One merge request should do one thing only.

* Feel free to submit as many merge request as you can. There is a problem
  with the size of a merge request, not with their number :)

* Some reasons for keeping the merge requests small:

  * Large changes are much more likely to do many things.
  * It's harder to understand them.
  * It's harder to review them.
  * It's harder to inspect the main branch to find the merge that.
    introduced a bug.
  * It's more likely to break the build.
  * It's harder to cherry pick code for backporting / supporting old releases.


Merge commit message
--------------------

We would like to have a clean merge commit log on the main development branch.


This is why a merge should have a standard commit message, in the format::

    [#1234] What was done in this branch.


* ``#1234`` is the ticket number for this branch. It is used to get more
  details about branch work and review. It can also be used to associate a
  commit to a ticket / branch / review / task and check the history/story of
  that commit.

* The commit message should be on a single line and should be under 50
  characters. It is a summary of changes in that branch. Further details
  can be found in the changelog.


For person checking changes
===========================

* If the work is good, you can request the code to be merged by the author
  by setting the state to needs_merge.
* If no merge is required you can close the ticket as solved.
* If changes are required, you put the ticket in the `needs_changes` state and
  assign the ticket to the person who can make the required changes so that
  the work can be ready for another review.
* Don't spend to much time on a review request if it is not clear enought and
  you don't know exactly what to do and how to test.
  This is a problem with the review request and it `needs changes`.


Reviewer's check list
---------------------

* Does the code have tests?
* Does **all** tests / linters pass?
* Is there a changelog entry for changes?
* Is there documentation for changes?
